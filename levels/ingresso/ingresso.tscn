[gd_scene load_steps=20 format=3 uid="uid://dxa6tkkfq7b3q"]

[ext_resource type="Script" path="res://levels/ingresso/ingresso.gd" id="1_8qsso"]
[ext_resource type="PackedScene" uid="uid://b1124l3cpps2k" path="res://player/player.tscn" id="2_amsm6"]
[ext_resource type="Texture2D" uid="uid://b8cvs5u71frtf" path="res://resource/assets/rooms/Hall/Hall.PNG" id="2_vknqs"]
[ext_resource type="PackedScene" uid="uid://x1in8gvchlxv" path="res://link_system/link_system.tscn" id="3_1w6um"]
[ext_resource type="Script" path="res://dialogue/data/dialog_data.gd" id="3_fpr8x"]
[ext_resource type="PackedScene" uid="uid://0hi4ih83soya" path="res://link_system/portal.tscn" id="4_4x6bi"]
[ext_resource type="Script" path="res://requirement/scripts/requirement.gd" id="5_twhkk"]
[ext_resource type="PackedScene" uid="uid://ymmamvc2fsqp" path="res://act2-t-rex-puzzle/t-rex-trigger/t_rex_trigger.tscn" id="11_e0sph"]
[ext_resource type="Texture2D" uid="uid://brwywxg2ftrdc" path="res://resource/assets/char-280px/Fronte/Testa.png" id="12_4ffme"]
[ext_resource type="AudioStream" uid="uid://d0a5iyaq5q773" path="res://audio/sfx/puzzle_t_rex/Rope_throwing.wav" id="13_q6wsf"]
[ext_resource type="AudioStream" uid="uid://d4dnqfuhrocqe" path="res://audio/sfx/puzzle_t_rex/Tooth_fall_01.wav" id="14_8gly2"]
[ext_resource type="PackedScene" uid="uid://b4q1hdxo0i0xe" path="res://door_lock_hall/door_lock_hall.tscn" id="16_b4hsd"]
[ext_resource type="PackedScene" uid="uid://t87t82e062ie" path="res://npc_act_1/npc_3.tscn" id="16_wlojo"]
[ext_resource type="Texture2D" uid="uid://cba3khksutltm" path="res://resource/assets/rooms/Hall/porte_hall.png" id="17_eok5r"]
[ext_resource type="PackedScene" uid="uid://cebw0e58m5xj5" path="res://camera/camera.tscn" id="19_f21q0"]

[sub_resource type="Animation" id="Animation_yrndo"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FallingToothAnim/CanvasLayer/ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0, 0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FallingToothAnim/CanvasLayer/AudioStreamPlayer2D:playing")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("FallingToothAnim/CanvasLayer/AudioStreamPlayer2D2:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_vm4dc"]
resource_name = "fallling_tooth"
length = 6.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FallingToothAnim/CanvasLayer/ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 5.36667, 5.93333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(0, 0, 0, 1), Color(0, 0, 0, 1), Color(0, 0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FallingToothAnim/CanvasLayer/AudioStreamPlayer2D:playing")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.7),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("FallingToothAnim/CanvasLayer/AudioStreamPlayer2D2:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(2.03333),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_8spds"]
_data = {
"RESET": SubResource("Animation_yrndo"),
"fallling_tooth": SubResource("Animation_vm4dc")
}

[sub_resource type="Resource" id="Resource_fn0b3"]
script = ExtResource("3_fpr8x")
dialogue_text = Array[String](["I need something to catch it!"])
character_image = ExtResource("12_4ffme")
text_name = "Angelo"
triggers = Array[ExtResource("5_twhkk")]([])

[node name="Ingresso" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_8qsso")

[node name="ColorRect2" type="ColorRect" parent="."]
offset_left = -959.0
offset_top = -545.0
offset_right = 2791.0
offset_bottom = 1810.0
color = Color(0, 0, 0, 1)

[node name="LinkSystem" parent="." node_paths=PackedStringArray("player_ref") instance=ExtResource("3_1w6um")]
player_ref = NodePath("../Player")

[node name="SouthDoor" type="Node2D" parent="LinkSystem"]
position = Vector2(1124, 928)

[node name="ColorRect" type="ColorRect" parent="LinkSystem/SouthDoor"]
offset_right = 40.0
offset_bottom = 40.0
color = Color(0.769008, 0.954614, 0.43227, 1)
metadata/_edit_lock_ = true

[node name="ExitDoor" type="Node2D" parent="LinkSystem"]
position = Vector2(1869, 544)

[node name="ColorRect" type="ColorRect" parent="LinkSystem/ExitDoor"]
offset_right = 40.0
offset_bottom = 40.0
color = Color(0.769008, 0.954614, 0.43227, 1)
metadata/_edit_lock_ = true

[node name="WestDoor" type="Node2D" parent="LinkSystem"]
position = Vector2(-135, 419)

[node name="ColorRect" type="ColorRect" parent="LinkSystem/WestDoor"]
offset_right = 40.0
offset_bottom = 40.0
color = Color(0.435294, 0.580392, 0.34902, 1)
metadata/_edit_lock_ = true

[node name="Guardiola" parent="." instance=ExtResource("4_4x6bi")]
position = Vector2(1194, 1152)
scale = Vector2(2.92001, 0.28)
level_id = "guardiola"
link_id = "NorthDoor"

[node name="Corridoio" parent="." instance=ExtResource("4_4x6bi")]
z_index = 1
position = Vector2(-202, 311)
scale = Vector2(1, 0.560001)
level_id = "corridoio"
link_id = "EastDoor"

[node name="Esterno" parent="." instance=ExtResource("4_4x6bi")]
position = Vector2(2047, 415)
scale = Vector2(1, 1.56)
level_id = "esterno"
link_id = "WestDoor"

[node name="Label" type="Label" parent="."]
offset_left = 441.0
offset_top = 273.0
offset_right = 912.0
offset_bottom = 328.0
theme_override_font_sizes/font_size = 40
text = "Ingresso"

[node name="FallingToothAnim" type="Node2D" parent="."]

[node name="CanvasLayer" type="CanvasLayer" parent="FallingToothAnim"]

[node name="AnimationPlayer" type="AnimationPlayer" parent="FallingToothAnim/CanvasLayer"]
root_node = NodePath("../../..")
libraries = {
"": SubResource("AnimationLibrary_8spds")
}

[node name="ColorRect" type="ColorRect" parent="FallingToothAnim/CanvasLayer"]
z_index = 1
offset_left = -961.0
offset_top = -586.0
offset_right = 2789.0
offset_bottom = 1769.0
color = Color(0, 0, 0, 0)

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="FallingToothAnim/CanvasLayer"]
stream = ExtResource("13_q6wsf")

[node name="AudioStreamPlayer2D2" type="AudioStreamPlayer2D" parent="FallingToothAnim/CanvasLayer"]
stream = ExtResource("14_8gly2")

[node name="Stanza" type="Sprite2D" parent="."]
texture = ExtResource("2_vknqs")
offset = Vector2(962, 539)
region_rect = Rect2(4420.85, 1251.41, 2531.43, 1564.52)

[node name="StaticBody2D" type="StaticBody2D" parent="Stanza"]
collision_layer = 2

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Stanza/StaticBody2D"]
position = Vector2(0, -5)
polygon = PackedVector2Array(1314, 1100, 2111, 1100, 2100, 1053, 2100, 904, 2071, 865, 2029, 870, 1992, 852, 1971, 835, 1956, 811, 1975, 770, 2015, 553, 2035, 267, 1895, 65, 1832, 481, 1756, 441, 1750, 400, 1310, 400, 1278, 195, 1174, 195, 1166, 100, 1056, 100, 959, 100, 621, 100, 547, 210, 49, 210, -55, 412, -84, 411, -94, 149, -200, 264, -133, 562, -351, 937, -438, 1100, 1081, 1100, 1080, 1153, -475, 1131, -239, 223, -79, 68, 58, 160, 517, 154, 598, 31, 968, -9, 1166, 9, 1304, 55, 1789, 206, 1879, 11, 2104, 304, 2098, 811, 2246, 1063, 2231, 1129, 1313, 1151)

[node name="FollowCamera" parent="." node_paths=PackedStringArray("player_ref") instance=ExtResource("19_f21q0")]
player_ref = NodePath("../Player")

[node name="DoorLockHall" parent="." instance=ExtResource("16_b4hsd")]
position = Vector2(-208, 316)

[node name="TRexTrigger" parent="." instance=ExtResource("11_e0sph")]
position = Vector2(549, 311)
dialog = Array[ExtResource("3_fpr8x")]([SubResource("Resource_fn0b3")])

[node name="PortaDx" type="Sprite2D" parent="."]
y_sort_enabled = true
position = Vector2(1988, 627)
texture = ExtResource("17_eok5r")
offset = Vector2(124, -243.18)
region_enabled = true
region_rect = Rect2(2605, 461, 286, 822)

[node name="PortaSx" type="Sprite2D" parent="."]
y_sort_enabled = true
position = Vector2(-135, 469)
texture = ExtResource("17_eok5r")
offset = Vector2(-165, -212.18)
region_enabled = true
region_rect = Rect2(68, 269, 533, 948)

[node name="Npc2" parent="." instance=ExtResource("16_wlojo")]
position = Vector2(700, 171)
collision_layer = 10

[node name="Player" parent="." instance=ExtResource("2_amsm6")]
unique_name_in_owner = true
position = Vector2(1362, 574)

[connection signal="animation_finished" from="FallingToothAnim/CanvasLayer/AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
[connection signal="animation_started" from="FallingToothAnim/CanvasLayer/AnimationPlayer" to="." method="_on_animation_player_animation_started"]
